import{useCallback as L,useEffect as y,useRef as h}from"react";function x(n,t,i,w={}){let{debounce:d,delay:a,enabled:s=!0,once:o,capture:b,passive:p,targetSelector:E}=w,u=h(null),l=h(!1),c=L(e=>{if(!(typeof document>"u"||!s)&&!(o&&l.current)){if(l.current=!0,o||(l.current=!1),a){setTimeout(()=>i(e),a);return}if(d){u.current&&clearTimeout(u.current),u.current=window.setTimeout(()=>i(e),d);return}i(e)}},[i,d,a,s,o]);return y(()=>{if(typeof window>"u"||typeof document>"u"||!s)return;let e=[],v=n&&"current"in n?n.current:n||window;if(E?document.querySelectorAll(E).forEach(r=>e.push(r)):v&&e.push(v),e.length===0)return;let f=Array.isArray(t)?t:[t];return e.forEach(r=>{f.forEach(m=>{r==null||r.addEventListener(m,c,{capture:b,passive:p,once:o})})}),()=>{e.forEach(r=>{f.forEach(m=>{r==null||r.removeEventListener(m,c)})}),u.current&&clearTimeout(u.current)}},[n,t,c,s,b,p,o,E]),()=>{if(typeof window>"u"||typeof document>"u")return;let e=n&&"current"in n?n.current:n||window;e&&(Array.isArray(t)?t:[t]).forEach(f=>{e.removeEventListener(f,c)})}}export{x as useListener};
//# sourceMappingURL=index.js.map
