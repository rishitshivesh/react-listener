import{useCallback as p,useEffect as g,useRef as h}from"react";function A(r=window,t,o,L={}){let{debounce:s,delay:a,enabled:u=!0,once:i,capture:v,passive:m,targetSelector:f}=L,l=h(null),b=h(!1),c=p(n=>{if(u&&!(i&&b.current)){if(b.current=!0,a){setTimeout(()=>o(n),a);return}if(s){l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{o(n)},s);return}o(n)}},[o,s,a,u,i]);return g(()=>{if(!u)return;let n=[];if(f)document.querySelectorAll(f).forEach(e=>n.push(e));else{let e=r&&"current"in r?r.current:r;e&&n.push(e)}if(n.length===0)return;let E=Array.isArray(t)?t:[t];return n.forEach(e=>{E.forEach(d=>{e==null||e.addEventListener(d,c,{capture:v,passive:m,once:i})})}),()=>{n.forEach(e=>{E.forEach(d=>{e==null||e.removeEventListener(d,c)})})}},[r,t,c,u,v,m,i,f]),()=>{let n=r&&"current"in r?r.current:r;n&&(Array.isArray(t)?t:[t]).forEach(e=>{n.removeEventListener(e,c)})}}export{A as useListener};
//# sourceMappingURL=index.js.map
