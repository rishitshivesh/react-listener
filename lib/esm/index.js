import{useCallback as T,useEffect as p,useRef as h}from"react";function x(r=window,t,u,L={}){let{debounce:a,delay:f,enabled:i=!0,once:o,capture:m,passive:b,targetSelector:E}=L,s=h(null),l=h(!1),c=T(n=>{if(i&&!(o&&l.current)){if(l.current=!0,o||(l.current=!1),f){setTimeout(()=>u(n),f);return}if(a){s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>u(n),a);return}u(n)}},[u,a,f,i,o]);return p(()=>{if(!i)return;let n=[];if(E)document.querySelectorAll(E).forEach(e=>n.push(e));else{let e=r&&"current"in r?r.current:r;e&&n.push(e)}if(n.length===0)return;let d=Array.isArray(t)?t:[t];return n.forEach(e=>{d.forEach(v=>{e==null||e.addEventListener(v,c,{capture:m,passive:b,once:o})})}),()=>{n.forEach(e=>{d.forEach(v=>{e==null||e.removeEventListener(v,c)})}),s.current&&clearTimeout(s.current)}},[r,t,c,i,m,b,o,E]),()=>{let n=r&&"current"in r?r.current:r;n&&(Array.isArray(t)?t:[t]).forEach(e=>{n.removeEventListener(e,c)})}}export{x as useListener};
//# sourceMappingURL=index.js.map
